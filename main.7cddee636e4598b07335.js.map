{"version":3,"sources":["webpack:///./js/apiService.js","webpack:///./js/photoList.js"],"names":["query","pageNumber","buttonPosition","baseUrl","key","fetchImages","requestParam","this","fetch","then","res","json","refs","searchForm","document","querySelector","photoList","loadMore","e","apiServices","bottomPosition","getBoundingClientRect","bottom","data","markup","getTemplate","hits","insertAdjacentHTML","reduce","acc","photo","webformatURL","largeImageURL","likes","views","comments","downloads","addEventListener","preventDefault","currentTarget","elements","value","innerHTML","window","scrollTo","top","left","behavior","documentElement","clientHeight"],"mappings":"2JAAe,GACXA,MAAO,GACPC,WAAY,EACZC,eAAgB,EAChBC,QAAS,2BACTC,IAAK,qCAELC,YAPW,WAQT,IAAMC,EAAe,8CAA8CC,KAAKP,MAAtD,SAAoEO,KAAKN,WAAzE,oBAAuGM,KAAKH,IAC9H,OAAOI,MAAMD,KAAKJ,QAAUG,GACzBG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,YCRnBC,EAAO,CACXC,WAAYC,SAASC,cAAc,eACnCC,UAAWF,SAASC,cAAc,YAClCE,SAAUH,SAASC,cAAc,SAQnC,SAASE,EAASC,GACdC,EAAYC,eAAiBR,EAAKI,UAAUK,wBAAwBC,OACtEH,EAAYlB,YAAc,EAC1BkB,EAAYd,cAAcI,MAAK,SAAAc,GAC7B,IAAMC,EAASC,EAAYF,EAAKG,MAChCd,EAAKI,UAAUW,mBAAmB,YAAaH,MA+BjD,SAASC,EAAYF,GACnB,OAAOA,EAAKK,QAAO,SAACC,EAAKC,GACvB,OAAOD,EAAO,iDACGC,EAAMC,aADb,yBACkDD,EAAME,cADxD,sKAMMF,EAAMG,MANZ,qJAUMH,EAAMI,MAVZ,kJAcMJ,EAAMK,SAdZ,yJAkBML,EAAMM,UAlBZ,8DAsBT,IAjEPxB,EAAKC,WAAWwB,iBAAiB,UAc/B,SAA2BnB,GACzBA,EAAEoB,iBACFnB,EAAYlB,WAAa,EAEzBkB,EAAYnB,MAAQkB,EAAEqB,cAAcC,SAASxC,MAAMyC,MAEnDtB,EAAYd,cAAcI,MAAK,SAAAc,GAC7B,IAAMC,EAASC,EAAYF,EAAKG,MAChCd,EAAKI,UAAU0B,UAAYlB,QArBjCZ,EAAKK,SAASoB,iBAAiB,QAASpB,GACxCL,EAAKK,SAASoB,iBAAiB,SA8B7B,WACEM,OAAOC,SAAS,CAEZC,IAAK,EACLC,KAAM,EACNC,SAAU,cAlClBJ,OAAON,iBAAiB,UAuBtB,WACI,KAAGvB,SAASkC,gBAAgB3B,wBAAwBC,OAASR,SAASkC,gBAAgBC,aAAa,IAE5F,OADHhC,O","file":"main.7cddee636e4598b07335.js","sourcesContent":["export default {\r\n    query: '',\r\n    pageNumber: 1,\r\n    buttonPosition: 0,\r\n    baseUrl: 'https://pixabay.com/api/',\r\n    key: '16067916-d5eb1414a830d8329bdf43cfe',\r\n  \r\n    fetchImages() {\r\n      const requestParam = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.pageNumber}&per_page=12&key=${this.key}`;\r\n      return fetch(this.baseUrl + requestParam)\r\n        .then(res => res.json());\r\n    },\r\n  };","import apiServices from './apiService';\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('#searchForm'),\r\n  photoList: document.querySelector(\".gallery\"),\r\n  loadMore: document.querySelector(\".btn\")\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', searchFormHandler);\r\nrefs.loadMore.addEventListener('click', loadMore);\r\nrefs.loadMore.addEventListener('click', scroll);\r\nwindow.addEventListener('scroll', infScroll);\r\n\r\nfunction loadMore(e) {\r\n    apiServices.bottomPosition = refs.photoList.getBoundingClientRect().bottom;\r\n  apiServices.pageNumber += 1;\r\n  apiServices.fetchImages().then(data => {\r\n    const markup = getTemplate(data.hits);\r\n    refs.photoList.insertAdjacentHTML('beforeend', markup);\r\n  });\r\n}\r\n\r\n  function searchFormHandler(e) {\r\n    e.preventDefault();\r\n    apiServices.pageNumber = 1;\r\n\r\n    apiServices.query = e.currentTarget.elements.query.value;\r\n\r\n    apiServices.fetchImages().then(data => {\r\n      const markup = getTemplate(data.hits);\r\n      refs.photoList.innerHTML = markup;\r\n    });\r\n  };\r\n\r\n  function infScroll() {\r\n      if(document.documentElement.getBoundingClientRect().bottom < document.documentElement.clientHeight+50) {\r\n          loadMore();\r\n      } else return\r\n  }\r\n\r\n  function scroll() {\r\n    window.scrollTo({\r\n        // top: apiServices.buttonPosition,\r\n        top: 0,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n  }\r\n\r\n  function getTemplate(data) {\r\n    return data.reduce((acc, photo) => {\r\n      return acc += `<li class=\"photo-card\">\r\n            <img src=${photo.webformatURL} alt=\"\" data-bigphoto=${photo.largeImageURL}/>\r\n    \r\n            <div class=\"stats\">\r\n                <p class=\"stats-item\">\r\n                    <i class=\"material-icons\">thumb_up</i>\r\n                    ${photo.likes}\r\n                </p>\r\n                <p class=\"stats-item\">\r\n                    <i class=\"material-icons\">visibility</i>\r\n                    ${photo.views}\r\n                </p>\r\n                <p class=\"stats-item\">\r\n                    <i class=\"material-icons\">comment</i>\r\n                    ${photo.comments}\r\n                </p>\r\n                <p class=\"stats-item\">\r\n                    <i class=\"material-icons\">cloud_download</i>\r\n                    ${photo.downloads}\r\n                </p>\r\n            </div>\r\n        </li>`\r\n    }, '');\r\n  }"],"sourceRoot":""}